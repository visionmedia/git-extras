#!/usr/bin/env bash

clear


max_count=1
if [[ "$1" == "-c" ]]; then
    shift
    max_count="$1"; shift
fi

color="--color=always"
no_color="--no-color"
if [[ "$1" == "${no_color}" ]]; then
    color="$1"; shift
else
    if [[ "$2" == "${no_color}" ]]; then
        color="$2"
    fi
fi


header() {
    if [[ "${color}" != "${no_color}" ]]; then
        tput setaf 242
    fi

    printf "### $1\n"

    if [[ "${color}" != "${no_color}" ]]; then
        tput sgr0
    fi
}

git_cmd() {
    eval "$1"
    printf "\n"
}


# Show info similar to svn

header "Remote URLs:"
git_cmd "git remote -v"

header "Remote Branches:"
git_cmd "git branch -r ${color}"

header "Local Branches:"
git_cmd "git branch ${color}"

if [[ "${max_count}" -ne 1 ]]; then
    header="Top ${max_count} Commits:"
else
    header="Most Recent Commit:"
fi

header "${header}"
git_cmd "git --no-pager log --max-count=${max_count} --pretty=short ${color}"

if [[ "$1" != "--no-config" ]]; then
  header "Configuration (.git/config):"
  git --no-pager config --list
fi
