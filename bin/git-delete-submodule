#!/usr/bin/env bash

submodule=$1

test -z "$submodule" && echo "submodule required" 1>&2 && exit 1
test ! -f .gitmodules && echo ".gitmodules file not found" 1>&2 && exit 2
NAME="${submodule%/}" # remove tailing /
check_submodule_existence "$NAME"

git submodule deinit "$NAME"
git rm --cached "$NAME"
rm -rf .git/modules/"$NAME"
